$(document).ready(function(){$('.page-ciudad .row-tiendas article.content').on('click',function(){var url=$(this).find('.link-tienda').attr('href');window.location.href=url;});if($('.page-tienda').size()>0){$('.box-content p').each(function(){if($(this).html()=='&nbsp;'){$(this).remove();}});}
$(".carousel-inner").swiperight(function(){$(this).parent().carousel('prev');});$(".carousel-inner").swipeleft(function(){$(this).parent().carousel('next');});$('.toggle-menu, .footer h4').on('click',function(){$(this).toggleClass('active');$(this).next().slideToggle();});if($('.home-page .slick').size()>0){$('.home-page .box-categorias .slick').slick({infinite:true,slidesToShow:8,slidesToScroll:1,arows:false,responsive:[{breakpoint:991,settings:{slidesToShow:6,slidesToScroll:6,infinite:true,dots:true}},{breakpoint:767,settings:{slidesToShow:4,slidesToScroll:4,infinite:true,dots:true}},{breakpoint:480,settings:{slidesToShow:3,slidesToScroll:3,infinite:true,dots:true}}]});$('.home-page .box-vender .slick').slick({infinite:true,slidesToShow:4,slidesToScroll:1,arows:true,responsive:[{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:360,settings:{slidesToShow:1,slidesToScroll:1}}]});}
if($('.page-alquiler .slick').size()>0){$('.page-alquiler .slick').slick({autoplay:true,infinite:true,slidesToShow:3,slidesToScroll:1,arows:true,responsive:[{breakpoint:991,settings:{slidesToShow:1,slidesToScroll:1}}]});}
$('select[name="links-tiendas"]').on('change',function(e){if($(this).val()!=''){$(this).removeClass('error');$(".home-services .box-cita .btn-arrow").attr('href',$(this).val());}});$(".home-services .box-cita .btn-arrow").on('click',function(e){if($('select[name="links-tiendas"]').val()==''){e.preventDefault();$(this).prev().addClass('error');}});$('.form-carnaval .btn-send').on('click',function(e){e.preventDefault();validateCarnaval(this);});$('.carnaval-file').change(function(){$('.content.second .message').hide();if(this.files&&this.files[0]){var extension=this.files[0].name.split('.').pop().toLowerCase();if(extension=='png'||extension=='jpg'||extension=='jpeg'){var reader=new FileReader();reader.onload=function(e){$('.content.second h3, .content.second .file').hide();$('.img-preview').attr('src',e.target.result);$('.preview').fadeIn();}
reader.readAsDataURL(this.files[0]);}else{$('.content.second .message').fadeIn();}}});$('.form-img-carnaval .remove').on('click',function(e){e.preventDefault();$('.carnaval-file').val('');$('.preview').hide();$('.content.second h3, .content.second .file').fadeIn();});$('.form-img-carnaval .btn-send').on('click',function(e){e.preventDefault();uploadCarnaval(this);});$('.page-carnaval .btn-back').on('click',function(e){e.preventDefault();window.history.back();});if($('.page-tienda').size()>0){var param_modal=window.location.search.substring(1);if(param_modal=='solicitar-cita=tienda'){$('#modal-cita').modal('show');}}
$('[data-toggle="tooltip"]').tooltip();if($('input[name="agent"]').size()>0){$('input[name="agent"]').attr('value',navigator.userAgent);}});function validateCarnaval(element){var formSent=false;var form=$(element).parents('form');var inputs=$(form).find('.form-control.required');var button=$(element);if(!formSent){$(form).find('.has-error').removeClass('has-error');var validate_email=/^[a-zA-Z0-9_\.\-]+@[a-zA-Z0-9\-]+\.[a-zA-Z0-9\-\.]+$/;var error=false;$(inputs).each(function(){if(!error){if($(this).hasClass('number')){if($(this).val()==''||isNaN($(this).val())){error=true;error_msg='número no válido';}}else if($(this).hasClass('email')){if($(this).val()==''||!validate_email.test($(this).val())){error=true;error_msg='email no válido';}}else if($(this).hasClass('documento')){var target=$("#documento");if($(this).val()==''||!validateDOC($(target).val())){error=true;error_msg='Documento de identidad no válido';}}
else if($(this).hasClass('check')){if(!$(this).is(':checked')){error=true;error_msg='debe aceptar este campo';}}else if($(this).hasClass('datepicker')){if(!isValidDate($(this).val())){error=true;error_msg='formato de fecha no valido';}}else{if($(this).val()==''||$(this).val()==0){error=true;error_msg='campo requerido';}}
if(error){$(this).focus();$(this).parent().addClass('has-error');console.log($(this).attr('name')+' - '+error_msg);}}});if(!error){formSent=true;$(form).find('.has-error').removeClass('has-error');$(button).addClass('sending');var data=$(form).serializeArray();$.post(PLUGIN.uri+'/users-area/res/carnaval.php?f=carnavalUser',data,function(res){if(res.status=='OK'){var form=$('<form/>',{action:TEMPLATE.base+'/carnaval/foto/',method:'post'}).append($('<input/>',{type:'hidden',name:'user',value:res.user,}).append($('<input/>',{type:'hidden',name:'email',value:res.email,}).append($('<input/>',{type:'hidden',name:'tienda',value:res.tienda,})))).appendTo('body');form.submit();}else{$(button).removeClass('sending');$(button).addClass('fail');}});}}}
function uploadCarnaval(element){var form=$(element).parents('form');$(element).addClass('sending');var data=new FormData();var array=$('form').serializeArray();$(array).each(function(){data.append(this.name,this.value);});$(form).find('input[type=file]').each(function(){var input_file=this;$(this.files).each(function(){data.append(input_file.name,this);});});;$.ajax({type:"POST",url:PLUGIN.uri+'/users-area/res/carnaval.php?f=carnavalImage',data:data,processData:false,contentType:false,success:function(res){if(res.status=='OK'){window.location.href=TEMPLATE.base+'/carnaval/gracias/';}else{window.location.href=TEMPLATE.base+'/carnaval/error/';}},error:function(e){window.location.href=TEMPLATE.base+'/carnaval/error/';}});}